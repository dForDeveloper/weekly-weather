(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,t,a){e.exports=a(319)},158:function(e,t,a){},319:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(145),i=a.n(c),s=(a(158),a(4)),o=a.n(s),u=a(6),l=a(25),p=a(26),m=a(31),d=a(27),h=a(30),f=a(29),g=a(321),v=function(){var e=Object(u.a)(o.a.mark(function e(t){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((a=e.sent).ok){e.next=8;break}return e.next=6,a.json();case 6:throw n=e.sent,Error(n);case 8:return e.next=10,a.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),y=function(e){return{type:"SET_COORDINATES",latitude:e.latitude,longitude:e.longitude}},E=function(e){return{type:"SET_CITY",city:e}},w=function(e){return{type:"SET_WEATHER",weather:e}},b=function(e){return{type:"SET_ERROR",message:e}},N=function(e){return{type:"TOGGLE_LOADING",isLoading:e}},k=a(39),x=function(e){var t=e.currently,a=t.temperature,n=t.apparentTemperature,r=t.summary,c=e.daily.data.reduce(function(e,t){return e.minTemp=Math.round(Math.min(e.minTemp,t.temperatureLow)),e.maxTemp=Math.round(Math.max(e.maxTemp,t.temperatureHigh)),e},{minTemp:200,maxTemp:-200}),i=c.minTemp,s=c.maxTemp,o=O(e.daily.data),u=o.shift();return{today:Object(k.a)({},u,{summary:r,temperature:Math.round(a),feelsLike:Math.round(n)}),week:o,minTemp:i,maxTemp:s,graphData:T(e.hourly.data.slice(0,24))}},O=function(e){return e.map(function(e){var t=e.summary,a=e.icon,n=e.precipType,r=e.precipProbability,c=e.time,i=e.temperatureLow,s=e.temperatureHigh,o=e.sunriseTime,u=e.sunsetTime,l=e.windSpeed,p=e.windBearing,m=e.humidity;return{summary:t,icon:a,precipType:n,precipProbability:Math.round(100*r)+"%",day:new Date(1e3*c).toDateString().slice(0,3),low:Math.round(i),high:Math.round(s),sunrise:new Date(1e3*o).toLocaleTimeString("en-US").replace(/:\d+/,""),sunset:new Date(1e3*u).toLocaleTimeString("en-US").replace(/:\d+/,""),wind:Math.round(l)+" mph "+S(p),humidity:Math.round(100*m)+"%"}})},S=function(e){switch(Math.round(e/22.5)%16){case 0:return"N";case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return}},T=function(e){return[{id:"",data:e.map(function(e){return{x:new Date(1e3*e.time).toLocaleTimeString().replace(/:\d+/,""),y:Math.round(e.temperature)}})}]},j=function(e){var t=e.latitude,a=e.longitude;return function(){var e=Object(u.a)(o.a.mark(function e(n){var r,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="https://weekly-weather.herokuapp.com/api/v1/weather/".concat(t,"/").concat(a),e.next=4,v(r);case 4:c=e.sent,n(w(x(c))),n(b("")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n(b(e.t0.message));case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}()},L=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).handleChange=function(t){e.setState({query:t.target.value})},e.handleSubmit=function(){var t=Object(u.a)(o.a.mark(function t(a){var n,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),n=e.state.query,r=e.props.history,e.props.forwardGeocode(n,r),e.setState({query:""});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.state={query:""},e}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"Search"},r.a.createElement("input",{value:this.state.query,onChange:this.handleChange,placeholder:"search cities",className:"Search--input"}))}}]),t}(n.Component),C=Object(g.a)(Object(f.b)(null,function(e){return{forwardGeocode:function(t,a){return e(function(e,t){return function(){var a=Object(u.a)(o.a.mark(function a(n){var r,c,i,s,u,l,p,m,d,h,f,g;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n(N(!0)),a.prev=1,r=e.replace(/\s/g,"+").replace(/,/g,"%2C"),c="https://weekly-weather.herokuapp.com/api/v1/forwardgeocode/".concat(r),a.next=6,v(c);case 6:return i=a.sent,s=i[0].geometry,u=s.lat,l=s.lng,p=i[0].components,m=p.city,d=p.locality,h=p.state_district,f=p.state_code,n(E("".concat(g=m||d||h,", ").concat(f))),n(y({latitude:u,longitude:l})),a.next=14,n(j({latitude:u,longitude:l}));case 14:t.push("/"+encodeURI("".concat(f,"/").concat(g))),n(b("")),a.next=21;break;case 18:a.prev=18,a.t0=a.catch(1),n(b(a.t0.message));case 21:n(N(!1));case 22:case"end":return a.stop()}},a,null,[[1,18]])}));return function(e){return a.apply(this,arguments)}}()}(t,a))}}})(L)),D=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).handleClick=function(){e.setState({isExpanded:!e.state.isExpanded})},e.state={isExpanded:!1},e}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.isExpanded,t=this.props,a=t.min,n=t.max,c=t.day,i=t.summary,s=t.icon,o=t.precipType,u=t.precipProbability,l=t.low,p=t.high,m=t.sunrise,d=t.sunset,h=t.wind,f=t.humidity,g={width:100*(p-l)/(n-a)+"%",marginLeft:100*(l-a)/(n-a)+"%"};return r.a.createElement("div",{className:"ForecastBar"},r.a.createElement("div",{className:"ForecastBar--bar-container"},r.a.createElement("span",{className:s+" small-icon"}),r.a.createElement("span",{className:"day"},c),r.a.createElement("span",{className:"bar-container"},r.a.createElement("span",{className:"bar",style:g},r.a.createElement("span",{className:"low"},l,"\xb0"),r.a.createElement("span",{className:"high"},p,"\xb0"))),r.a.createElement("button",{className:"ForecastBar--button",onClick:this.handleClick},e?"--":"+")),e&&r.a.createElement("article",{className:"article article--expanded"},r.a.createElement("header",{className:"article--header"},r.a.createElement("h2",{className:"article--h2"},r.a.createElement("div",{className:s}),i),r.a.createElement("span",null,"Chance of ",o,": ",u)),r.a.createElement("div",{className:"article--div"},r.a.createElement("p",{className:"p"},"Low: ",l,"\xb0"),r.a.createElement("p",{className:"p"},"Sunrise: ",m),r.a.createElement("p",{className:"p"},"Wind: ",h),r.a.createElement("p",{className:"p"},"High: ",p,"\xb0"),r.a.createElement("p",{className:"p"},"Sunset: ",d),r.a.createElement("p",{className:"p"},"Humidity: ",f))))}}]),t}(n.Component),W=a(149),R=function(e){var t=e.data,a=e.low,n=e.high,c=Math.min(0,a),i=n+20;return r.a.createElement("div",{className:"Graph"},r.a.createElement("h3",{className:"h3"},"24 Hour Forecast"),r.a.createElement(W.ResponsiveLine,{data:t,margin:{top:16,right:24,bottom:64,left:48},xScale:{type:"point"},yScale:{type:"linear",stacked:!0,min:c,max:i},curve:"monotoneX",axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:-60,legendOffset:36,legendPosition:"middle",tickValues:0},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"Fahrenheit",legendOffset:-32,legendPosition:"middle"},enableGridX:!1,colors:["#4285f4"],dotSize:10,dotColor:"inherit:darker(0.3)",dotBorderWidth:2,dotBorderColor:"#ffffff",enableDotLabel:!0,dotLabel:"y",dotLabelYOffset:-12,animate:!0,motionStiffness:90,motionDamping:15,isInteractive:!1}))},M=function(e){var t=e.city,a=e.weather,n=a.today,c=a.week,i=a.minTemp,s=a.maxTemp,o=a.graphData,u=n.temperature,l=n.feelsLike,p=n.summary,m=n.icon,d=n.precipType,h=n.precipProbability,f=n.low,g=n.high,v=n.sunrise,y=n.sunset,E=n.wind,w=n.humidity;return r.a.createElement("main",{className:"WeatherContainer"},r.a.createElement("article",{className:"article"},r.a.createElement("header",{className:"article--header"},r.a.createElement("h2",{className:"h2"},r.a.createElement("div",{className:m}),u,"\xb0 and ",p," in ",t),r.a.createElement("span",{className:"header--span--feels"},"Feels like: ",l,"\xb0"),r.a.createElement("span",{className:"header--span--precip"},"Chance of ",d,": ",h)),r.a.createElement("div",{className:"article--div"},r.a.createElement("p",{className:"p"},"Low: ",f,"\xb0"),r.a.createElement("p",{className:"p"},"Sunrise: ",v),r.a.createElement("p",{className:"p"},"Wind: ",E),r.a.createElement("p",{className:"p"},"High: ",g,"\xb0"),r.a.createElement("p",{className:"p"},"Sunset: ",y),r.a.createElement("p",{className:"p"},"Humidity: ",w))),r.a.createElement(R,{data:o,low:f,high:g}),r.a.createElement("section",{className:"section"},r.a.createElement("h3",{className:"section--h3"},"7 Day Forecast"),c.map(function(e,t){return r.a.createElement(D,Object.assign({key:t,min:i,max:s},e))})))},_=function(e,t){var a=e.latitude,n=e.longitude;return function(){var e=Object(u.a)(o.a.mark(function e(r){var c,i,s,u,l,p,m,d;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c="https://weekly-weather.herokuapp.com/api/v1/reversegeocode/".concat(a,"/").concat(n),e.next=4,v(c);case 4:i=e.sent,s=i[0].components,u=s.city,l=s.locality,p=s.state_district,m=s.state_code,r(E("".concat(d=u||l||p,", ").concat(m))),t.push("/"+encodeURI("".concat(m,"/").concat(d))),r(b("")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r(b(e.t0.message));case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()},G=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).getUserLocation=Object(u.a)(o.a.mark(function e(){var t,n,r,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props,n=t.history,r=t.getUserIP,c=t.getGeolocation,(0,t.toggleLoading)(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(){var e=Object(u.a)(o.a.mark(function e(t){var a,r,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.coords;case 2:a=e.sent,r=a.latitude,i=a.longitude,c({latitude:r,longitude:i},n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(){a.setState({locationGranted:!1},function(){return r(n)})}):r(n);case 3:case"end":return e.stop()}},e)})),a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getUserLocation()}},{key:"render",value:function(){var e=this.props,t=e.userLocation,a=e.weather,n=e.error,c=e.isLoading,i=t.city;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App--header"},r.a.createElement("h1",{className:"h1"},"Weekly Weather")),r.a.createElement(C,null),!c&&r.a.createElement("div",null,a.today&&!n&&r.a.createElement(M,{city:i,weather:a}),n&&r.a.createElement("h2",{className:"App--h2"},"No results found")),c&&r.a.createElement("h2",{className:"App--h2"},"Loading..."),r.a.createElement("div",{className:"App--div--darksky"},r.a.createElement("a",{href:"https://darksky.net/poweredby/"},"Powered by Dark Sky")))}}]),t}(n.Component),A=Object(g.a)(Object(f.b)(function(e){return{userLocation:e.location,weather:e.weather,error:e.error,isLoading:e.isLoading}},function(e){return{getUserIP:function(t){return e(function(e){return function(){var t=Object(u.a)(o.a.mark(function t(a){var n,r,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(N(!0)),t.prev=1,t.next=5,v("https://weekly-weather.herokuapp.com/api/v1/ip");case 5:return n=t.sent,r=n.latitude,c=n.longitude,a(y({latitude:r,longitude:c})),t.next=11,a(_({latitude:r,longitude:c},e));case 11:return t.next=13,a(j({latitude:r,longitude:c}));case 13:a(b("")),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),a(b(t.t0.message));case 19:a(N(!1));case 20:case"end":return t.stop()}},t,null,[[1,16]])}));return function(e){return t.apply(this,arguments)}}()}(t))},getGeolocation:function(t,a){var n=t.latitude,r=t.longitude;e(function(e,t){var a=e.latitude,n=e.longitude;return function(){var e=Object(u.a)(o.a.mark(function e(r){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r(N(!0)),e.prev=1,r(y({latitude:a,longitude:n})),e.next=5,r(_({latitude:a,longitude:n},t));case 5:return e.next=7,r(j({latitude:a,longitude:n}));case 7:r(b("")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r(b(e.t0.message));case 13:r(N(!1));case 14:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}()}({latitude:n,longitude:r},a))},toggleLoading:function(t){return e(N(t))}}})(G)),I=a(320),P=a(20),H=a(151),B=a(152),U={latitude:null,longitude:null,city:""},F=Object(P.combineReducers)({location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COORDINATES":var a=t.latitude,n=t.longitude;return Object(k.a)({},e,{latitude:a,longitude:n});case"SET_CITY":var r=t.city;return Object(k.a)({},e,{city:r});default:return e}},weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WEATHER":return t.weather;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":return t.message;default:return e}},isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_LOADING":return t.isLoading;default:return e}}}),q=Object(H.composeWithDevTools)(Object(P.applyMiddleware)(B.a)),z=Object(P.createStore)(F,q),Y=r.a.createElement(f.a,{store:z},r.a.createElement(I.a,null,r.a.createElement(A,null)));i.a.render(Y,document.getElementById("root"))}},[[153,1,2]]]);
//# sourceMappingURL=main.32837ab8.chunk.js.map