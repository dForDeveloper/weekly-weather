(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{154:function(e,t,a){e.exports=a(320)},159:function(e,t,a){},320:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(146),i=a.n(c),s=(a(159),a(4)),o=a.n(s),u=a(6),l=a(25),p=a(26),m=a(31),d=a(27),h=a(30),f=a(29),g=a(323),v=a(321),E=function(){var e=Object(u.a)(o.a.mark(function e(t){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((a=e.sent).ok){e.next=8;break}return e.next=6,a.json();case 6:throw n=e.sent,Error(n);case 8:return e.next=10,a.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),y=function(e){return{type:"SET_COORDINATES",latitude:e.latitude,longitude:e.longitude}},w=function(e){return{type:"SET_CITY",city:e}},b=function(e){return{type:"SET_WEATHER",weather:e}},N=function(e){return{type:"SET_ERROR",message:e}},k=function(e){return{type:"TOGGLE_LOADING",isLoading:e}},O=a(40),S=function(e){var t=e.currently,a=t.temperature,n=t.apparentTemperature,r=t.summary,c=e.daily.data.reduce(function(e,t){return e.minTemp=Math.round(Math.min(e.minTemp,t.temperatureLow)),e.maxTemp=Math.round(Math.max(e.maxTemp,t.temperatureHigh)),e},{minTemp:200,maxTemp:-200}),i=c.minTemp,s=c.maxTemp,o=x(e.daily.data),u=o.shift();return{today:Object(O.a)({},u,{summary:r,temperature:Math.round(a),feelsLike:Math.round(n)}),week:o,minTemp:i,maxTemp:s,graphData:j(e.hourly.data.slice(0,24))}},x=function(e){return e.map(function(e){var t=e.summary,a=e.icon,n=e.precipType,r=e.precipProbability,c=e.time,i=e.temperatureLow,s=e.temperatureHigh,o=e.sunriseTime,u=e.sunsetTime,l=e.windSpeed,p=e.windBearing,m=e.humidity;return{summary:t,icon:a,precipType:n,precipProbability:Math.round(100*r)+"%",day:new Date(1e3*c).toDateString().slice(0,3),low:Math.round(i),high:Math.round(s),sunrise:new Date(1e3*o).toLocaleTimeString("en-US").replace(/:\d+/,""),sunset:new Date(1e3*u).toLocaleTimeString("en-US").replace(/:\d+/,""),wind:Math.round(l)+" mph "+T(p),humidity:Math.round(100*m)+"%"}})},T=function(e){switch(Math.round(e/22.5)%16){case 0:return"N";case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return}},j=function(e){return[{id:"",data:e.map(function(e){return{x:new Date(1e3*e.time).toLocaleTimeString().replace(/:\d+/,""),y:Math.round(e.temperature)}})}]},L=function(e){var t=e.latitude,a=e.longitude;return function(){var e=Object(u.a)(o.a.mark(function e(n){var r,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="https://weekly-weather.herokuapp.com/api/v1/weather/".concat(t,"/").concat(a),e.next=4,E(r);case 4:c=e.sent,n(b(S(c))),n(N("")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n(N(e.t0.message));case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}()},C=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).handleChange=function(t){e.setState({query:t.target.value})},e.handleSubmit=function(){var t=Object(u.a)(o.a.mark(function t(a){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),n=e.state.query,e.props.forwardGeocode(n),e.setState({query:""});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.state={query:""},e}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"Search"},r.a.createElement("input",{value:this.state.query,onChange:this.handleChange,placeholder:"search cities",className:"Search--input"}))}}]),t}(n.Component),W=Object(f.b)(null,function(e){return{forwardGeocode:function(t){return e((a=t,function(){var e=Object(u.a)(o.a.mark(function e(t){var n,r,c,i,s,u,l,p,m,d,h;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(k(!0)),e.prev=1,n=a.replace(/\s/g,"+").replace(/,/g,"%2C"),r="https://weekly-weather.herokuapp.com/api/v1/forwardgeocode/".concat(n),e.next=6,E(r);case 6:c=e.sent,i=c[0].geometry,s=i.lat,u=i.lng,l=c[0].components,p=l.city,m=l.locality,d=l.state_district,h=l.state_code,t(w("".concat(p||m||d,", ").concat(h))),t(y({latitude:s,longitude:u})),t(L({latitude:s,longitude:u})),t(N("")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),t(N(e.t0.message));case 19:t(k(!1));case 20:case"end":return e.stop()}},e,null,[[1,16]])}));return function(t){return e.apply(this,arguments)}}()));var a}}})(C),D=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).handleClick=function(){e.setState({isExpanded:!e.state.isExpanded})},e.state={isExpanded:!1},e}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.isExpanded,t=this.props,a=t.min,n=t.max,c=t.day,i=t.summary,s=t.icon,o=t.precipType,u=t.precipProbability,l=t.low,p=t.high,m=t.sunrise,d=t.sunset,h=t.wind,f=t.humidity,g={width:100*(p-l)/(n-a)+"%",marginLeft:100*(l-a)/(n-a)+"%"};return r.a.createElement("div",{className:"ForecastBar"},r.a.createElement("div",{className:"ForecastBar--bar-container"},r.a.createElement("span",{className:s+" small-icon"}),r.a.createElement("span",{className:"day"},c),r.a.createElement("span",{className:"bar-container"},r.a.createElement("span",{className:"bar",style:g},r.a.createElement("span",{className:"low"},l,"\xb0"),r.a.createElement("span",{className:"high"},p,"\xb0"))),r.a.createElement("button",{className:"ForecastBar--button",onClick:this.handleClick},e?"--":"+")),e&&r.a.createElement("article",{className:"article article--expanded"},r.a.createElement("header",{className:"article--header"},r.a.createElement("h2",{className:"article--h2"},r.a.createElement("div",{className:s}),i),r.a.createElement("span",null,"Chance of ",o,": ",u)),r.a.createElement("div",{className:"article--div"},r.a.createElement("p",{className:"p"},"Low: ",l,"\xb0"),r.a.createElement("p",{className:"p"},"Sunrise: ",m),r.a.createElement("p",{className:"p"},"Wind: ",h),r.a.createElement("p",{className:"p"},"High: ",p,"\xb0"),r.a.createElement("p",{className:"p"},"Sunset: ",d),r.a.createElement("p",{className:"p"},"Humidity: ",f))))}}]),t}(n.Component),M=a(148),R=function(e){var t=e.data,a=e.low,n=e.high,c=Math.min(0,a),i=n+20;return r.a.createElement("div",{className:"Graph"},r.a.createElement("h3",{className:"h3"},"24 Hour Forecast"),r.a.createElement(M.ResponsiveLine,{data:t,margin:{top:16,right:24,bottom:64,left:48},xScale:{type:"point"},yScale:{type:"linear",stacked:!0,min:c,max:i},curve:"monotoneX",axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:-60,legendOffset:36,legendPosition:"middle",tickValues:0},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"Fahrenheit",legendOffset:-32,legendPosition:"middle"},enableGridX:!1,colors:["#4285f4"],dotSize:10,dotColor:"inherit:darker(0.3)",dotBorderWidth:2,dotBorderColor:"#ffffff",enableDotLabel:!0,dotLabel:"y",dotLabelYOffset:-12,animate:!0,motionStiffness:90,motionDamping:15,isInteractive:!1}))},G=function(e){var t=e.city,a=e.weather,n=a.today,c=a.week,i=a.minTemp,s=a.maxTemp,o=a.graphData,u=n.temperature,l=n.feelsLike,p=n.summary,m=n.icon,d=n.precipType,h=n.precipProbability,f=n.low,g=n.high,v=n.sunrise,E=n.sunset,y=n.wind,w=n.humidity;return r.a.createElement("main",{className:"WeatherContainer"},r.a.createElement("article",{className:"article"},r.a.createElement("header",{className:"article--header"},r.a.createElement("h2",{className:"h2"},r.a.createElement("div",{className:m}),u,"\xb0 and ",p," in ",t),r.a.createElement("span",{className:"header--span--feels"},"Feels like: ",l,"\xb0"),r.a.createElement("span",{className:"header--span--precip"},"Chance of ",d,": ",h)),r.a.createElement("div",{className:"article--div"},r.a.createElement("p",{className:"p"},"Low: ",f,"\xb0"),r.a.createElement("p",{className:"p"},"Sunrise: ",v),r.a.createElement("p",{className:"p"},"Wind: ",y),r.a.createElement("p",{className:"p"},"High: ",g,"\xb0"),r.a.createElement("p",{className:"p"},"Sunset: ",E),r.a.createElement("p",{className:"p"},"Humidity: ",w))),r.a.createElement(R,{data:o,low:f,high:g}),r.a.createElement("section",{className:"section"},c.map(function(e,t){return r.a.createElement(D,Object.assign({key:t,min:i,max:s},e))})))},_=function(e){var t=e.latitude,a=e.longitude;return function(){var e=Object(u.a)(o.a.mark(function e(n){var r,c,i,s,u,l,p;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="https://weekly-weather.herokuapp.com/api/v1/reversegeocode/".concat(t,"/").concat(a),e.next=4,E(r);case 4:c=e.sent,i=c[0].components,s=i.city,u=i.locality,l=i.state_district,p=i.state_code,n(w("".concat(s||u||l,", ").concat(p))),n(N("")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n(N(e.t0.message));case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t){return e.apply(this,arguments)}}()},P=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(m.a)(this,Object(d.a)(t).call(this))).getGeolocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(){var t=Object(u.a)(o.a.mark(function t(a){var n,r,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.coords;case 2:n=t.sent,r=n.latitude,c=n.longitude,e.props.getWeatherByGeolocation({latitude:r,longitude:c});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),function(){e.setState({userDidConsent:!1},function(){return e.props.getUserIP()})}):e.props.getUserIP()},e.state={userDidConsent:!0},e}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getGeolocation()}},{key:"render",value:function(){var e=this.props,t=e.userLocation,a=e.weather,n=e.location,c=e.error,i=e.isLoading,s=t.city,o=s.replace(/\s/g,""),u=!n.pathname.includes(o)&&s;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App--header"},r.a.createElement("h1",{className:"h1"},"Weekly Weather")),r.a.createElement(W,null),!i&&r.a.createElement("div",null,u&&r.a.createElement(g.a,{to:o}),a.today&&!c&&r.a.createElement(G,{city:s,weather:a}),!this.state.userDidConsent&&r.a.createElement("h2",{className:"App--h2"},"Share your location for automatic redirection to your city"),c&&r.a.createElement("h2",{className:"App--h2"},"No results found")),i&&r.a.createElement("h2",{className:"App--h2"},"Loading..."))}}]),t}(n.Component),A=Object(v.a)(Object(f.b)(function(e){return{userLocation:e.location,weather:e.weather,error:e.error,isLoading:e.isLoading}},function(e){return{getUserIP:function(){return e(function(){var e=Object(u.a)(o.a.mark(function e(t){var a,n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(k(!0)),e.prev=1,e.next=5,E("https://weekly-weather.herokuapp.com/api/v1/ip");case 5:a=e.sent,n=a.latitude,r=a.longitude,t(y({latitude:n,longitude:r})),t(_({latitude:n,longitude:r})),t(L({latitude:n,longitude:r})),t(N("")),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t(N(e.t0.message));case 17:t(k(!1));case 18:case"end":return e.stop()}},e,null,[[1,14]])}));return function(t){return e.apply(this,arguments)}}())},getWeatherByGeolocation:function(t){var a=t.latitude,n=t.longitude;return e(function(e){var t=e.latitude,a=e.longitude;return function(){var e=Object(u.a)(o.a.mark(function e(n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(k(!0)),e.prev=1,n(y({latitude:t,longitude:a})),e.next=5,n(_({latitude:t,longitude:a}));case 5:return e.next=7,n(L({latitude:t,longitude:a}));case 7:n(N("")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),n(N(e.t0.message));case 13:n(k(!1));case 14:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}()}({latitude:a,longitude:n}))}}})(P)),I=a(322),B=a(20),H=a(151),F=a(152),q={latitude:null,longitude:null,city:""},U=Object(B.combineReducers)({location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COORDINATES":var a=t.latitude,n=t.longitude;return Object(O.a)({},e,{latitude:a,longitude:n});case"SET_CITY":var r=t.city;return Object(O.a)({},e,{city:r});default:return e}},weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WEATHER":return t.weather;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":return t.message;default:return e}},isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_LOADING":return t.isLoading;default:return e}}}),z=Object(H.composeWithDevTools)(Object(B.applyMiddleware)(F.a)),Y=Object(B.createStore)(U,z),J=r.a.createElement(f.a,{store:Y},r.a.createElement(I.a,null,r.a.createElement(A,null)));i.a.render(J,document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.d33f576d.chunk.js.map