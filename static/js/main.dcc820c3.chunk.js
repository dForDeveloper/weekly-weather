(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,t,a){e.exports=a(319)},158:function(e,t,a){},319:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(145),i=a.n(c),s=(a(158),a(4)),o=a.n(s),u=a(6),l=a(26),m=a(27),p=a(32),d=a(28),f=a(31),h=a(30),g=a(321),E=function(){var e=Object(u.a)(o.a.mark(function e(t){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((a=e.sent).ok){e.next=8;break}return e.next=6,a.json();case 6:throw n=e.sent,Error(n);case 8:return e.next=10,a.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),y=function(e){return{type:"SET_COORDINATES",latitude:e.latitude,longitude:e.longitude}},v=function(e){return{type:"SET_CITY",city:e}},w=function(e){return{type:"SET_WEATHER",weather:e}},b=function(e){return{type:"SET_ERROR",message:e}},O=function(e){return{type:"TOGGLE_LOADING",isLoading:e}},N=a(21),S=function(e){var t=e.currently,a=t.temperature,n=t.apparentTemperature,r=t.summary,c=e.daily.data.reduce(function(e,t){return e.minTemp=Math.round(Math.min(e.minTemp,t.temperatureLow)),e.maxTemp=Math.round(Math.max(e.maxTemp,t.temperatureHigh)),e},{minTemp:200,maxTemp:-200}),i=c.minTemp,s=c.maxTemp,o=k(e.daily.data),u=o.shift();return{today:Object(N.a)({},u,{summary:r,temperature:Math.round(a),feelsLike:Math.round(n)}),week:o,minTemp:i,maxTemp:s,graphData:x(e.hourly.data.slice(0,24))}},k=function(e){return e.map(function(e){var t=e.summary,a=e.icon,n=e.precipType,r=e.precipProbability,c=e.time,i=e.temperatureLow,s=e.temperatureHigh,o=e.sunriseTime,u=e.sunsetTime,l=e.windSpeed,m=e.windBearing,p=e.humidity;return{summary:t,icon:a,precipType:n,precipProbability:Math.round(100*r)+"%",day:new Date(1e3*c).toDateString().slice(0,3),low:Math.round(i),high:Math.round(s),sunrise:o,sunset:u,wind:Math.round(l)+" mph "+T(m),humidity:Math.round(100*p)+"%"}})},T=function(e){switch(Math.round(e/22.5)%16){case 0:return"N";case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return}},x=function(e){return[{id:"",data:e.map(function(e){return{x:new Date(1e3*e.time).toLocaleTimeString().replace(/:\d+/,""),y:Math.round(e.temperature)}})}]},j=function(e){var t=e.latitude,a=e.longitude;return function(){var e=Object(u.a)(o.a.mark(function e(n){var r,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r="https://weekly-weather.herokuapp.com/api/v1/weather/".concat(t,"/").concat(a),e.next=4,E(r);case 4:c=e.sent,n(w(S(c))),n(b("")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n(b(e.t0.message));case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}()},L=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(p.a)(this,Object(d.a)(t).call(this))).handleChange=function(t){e.setState({query:t.target.value})},e.handleSubmit=function(){var t=Object(u.a)(o.a.mark(function t(a){var n,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),n=e.state.query,r=e.props.history,e.props.forwardGeocode(n,r),e.setState({query:""});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.state={query:""},e}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"Search"},r.a.createElement("input",{value:this.state.query,onChange:this.handleChange,placeholder:"search cities",className:"Search--input"}))}}]),t}(n.Component),_=Object(g.a)(Object(h.b)(null,function(e){return{forwardGeocode:function(t,a){return e(function(e,t){return function(){var a=Object(u.a)(o.a.mark(function a(n){var r,c,i,s,u,l,m,p,d,f,h,g,w;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n(O(!0)),a.prev=1,r=e.replace(/\s/g,"+").replace(/,/g,"%2C"),c="https://weekly-weather.herokuapp.com/api/v1/forwardgeocode/".concat(r),a.next=6,E(c);case 6:return i=a.sent,s=i[0].annotations.timezone.offset_sec,n({type:"SET_CITY_TIMEZONE",offset:s}),u=i[0].geometry,l=u.lat,m=u.lng,p=i[0].components,d=p.city,f=p.locality,h=p.state_district,g=p.state_code,n(v("".concat(w=d||f||h,", ").concat(g))),n(y({latitude:l,longitude:m})),a.next=16,n(j({latitude:l,longitude:m}));case 16:t.push("/"+encodeURI("".concat(g,"/").concat(w))),n(b("")),a.next=23;break;case 20:a.prev=20,a.t0=a.catch(1),n(b(a.t0.message));case 23:n(O(!1));case 24:case"end":return a.stop()}},a,null,[[1,20]])}));return function(e){return a.apply(this,arguments)}}()}(t,a))}}})(L)),C=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(p.a)(this,Object(d.a)(t).call(this))).handleClick=function(){e.setState({isExpanded:!e.state.isExpanded})},e.state={isExpanded:!1},e}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.isExpanded,t=this.props,a=t.min,n=t.max,c=t.day,i=t.summary,s=t.icon,o=t.precipType,u=t.precipProbability,l=t.low,m=t.high,p=t.sunrise,d=t.sunset,f=t.wind,h=t.humidity,g=t.timezone,E={width:100*(m-l)/(n-a)+"%",marginLeft:100*(l-a)/(n-a)+"%"},y=new Date(1e3*(p-(g.userOffset-g.cityOffset))).toLocaleTimeString("en-US").replace(/:\d+/,""),v=new Date(1e3*(d-(g.userOffset-g.cityOffset))).toLocaleTimeString("en-US").replace(/:\d+/,"");return r.a.createElement("div",{className:"ForecastBar"},r.a.createElement("div",{className:"ForecastBar--bar-container"},r.a.createElement("span",{className:s+" small-icon"}),r.a.createElement("span",{className:"day"},c),r.a.createElement("span",{className:"bar-container"},r.a.createElement("span",{className:"bar",style:E},r.a.createElement("span",{className:"low"},l,"\xb0"),r.a.createElement("span",{className:"high"},m,"\xb0"))),r.a.createElement("button",{className:"ForecastBar--button",onClick:this.handleClick},e?"--":"+")),e&&r.a.createElement("article",{className:"article article--expanded"},r.a.createElement("header",{className:"article--header"},r.a.createElement("h2",{className:"article--h2"},r.a.createElement("div",{className:s}),i),r.a.createElement("span",null,"Chance of ",o,": ",u)),r.a.createElement("div",{className:"article--div"},r.a.createElement("p",{className:"p"},"Low: ",l,"\xb0"),r.a.createElement("p",{className:"p"},"Sunrise: ",y),r.a.createElement("p",{className:"p"},"Wind: ",f),r.a.createElement("p",{className:"p"},"High: ",m,"\xb0"),r.a.createElement("p",{className:"p"},"Sunset: ",v),r.a.createElement("p",{className:"p"},"Humidity: ",h))))}}]),t}(n.Component),D=a(149),M=function(e){var t=e.data,a=e.low,n=e.high,c=Math.min(0,a),i=n+20;return r.a.createElement("div",{className:"Graph"},r.a.createElement("h3",{className:"h3"},"24 Hour Forecast"),r.a.createElement(D.ResponsiveLine,{data:t,margin:{top:16,right:24,bottom:64,left:48},xScale:{type:"point"},yScale:{type:"linear",stacked:!0,min:c,max:i},curve:"monotoneX",axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:-60,legendOffset:36,legendPosition:"middle",tickValues:0},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"Fahrenheit",legendOffset:-32,legendPosition:"middle"},enableGridX:!1,colors:["#4285f4"],dotSize:10,dotColor:"inherit:darker(0.3)",dotBorderWidth:2,dotBorderColor:"#ffffff",enableDotLabel:!0,dotLabel:"y",dotLabelYOffset:-12,animate:!0,motionStiffness:90,motionDamping:15,isInteractive:!1}))},R=function(e){var t=e.city,a=e.weather,n=e.timezone,c=a.today,i=a.week,s=a.minTemp,o=a.maxTemp,u=a.graphData,l=c.temperature,m=c.feelsLike,p=c.summary,d=c.icon,f=c.precipType,h=c.precipProbability,g=c.low,E=c.high,y=c.sunrise,v=c.sunset,w=c.wind,b=c.humidity,O=new Date(1e3*(y-(n.userOffset-n.cityOffset))).toLocaleTimeString("en-US").replace(/:\d+/,""),N=new Date(1e3*(v-(n.userOffset-n.cityOffset))).toLocaleTimeString("en-US").replace(/:\d+/,"");return r.a.createElement("main",{className:"WeatherContainer"},r.a.createElement("article",{className:"article"},r.a.createElement("header",{className:"article--header"},r.a.createElement("h2",{className:"h2"},r.a.createElement("div",{className:d}),l,"\xb0 and ",p," in ",t),r.a.createElement("span",{className:"header--span--feels"},"Feels like: ",m,"\xb0"),r.a.createElement("span",{className:"header--span--precip"},"Chance of ",f,": ",h)),r.a.createElement("div",{className:"article--div"},r.a.createElement("p",{className:"p"},"Low: ",g,"\xb0"),r.a.createElement("p",{className:"p"},"Sunrise: ",O),r.a.createElement("p",{className:"p"},"Wind: ",w),r.a.createElement("p",{className:"p"},"High: ",E,"\xb0"),r.a.createElement("p",{className:"p"},"Sunset: ",N),r.a.createElement("p",{className:"p"},"Humidity: ",b))),r.a.createElement(M,{data:u,low:g,high:E}),r.a.createElement("section",{className:"section"},r.a.createElement("h3",{className:"section--h3"},"7 Day Forecast"),i.map(function(e,t){return r.a.createElement(C,Object.assign({key:t,min:s,max:o},e,{timezone:n}))})))},I=function(e,t){var a=e.latitude,n=e.longitude;return function(){var e=Object(u.a)(o.a.mark(function e(r){var c,i,s,u,l,m,p,d,f;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c="https://weekly-weather.herokuapp.com/api/v1/reversegeocode/".concat(a,"/").concat(n),e.next=4,E(c);case 4:i=e.sent,s=i[0].annotations.timezone.offset_sec,r({type:"SET_USER_TIMEZONE",offset:s}),u=i[0].components,l=u.city,m=u.locality,p=u.state_district,d=u.state_code,r(v("".concat(f=l||m||p,", ").concat(d))),t.push("/"+encodeURI("".concat(d,"/").concat(f))),r(b("")),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r(b(e.t0.message));case 17:case"end":return e.stop()}},e,null,[[0,14]])}));return function(t){return e.apply(this,arguments)}}()},W=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).getUserLocation=Object(u.a)(o.a.mark(function e(){var t,n,r,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props,n=t.history,r=t.getUserIP,c=t.getGeolocation,(0,t.toggleLoading)(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(){var e=Object(u.a)(o.a.mark(function e(t){var a,r,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.coords;case 2:a=e.sent,r=a.latitude,i=a.longitude,c({latitude:r,longitude:i},n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),function(){a.setState({locationGranted:!1},function(){return r(n)})}):r(n);case 3:case"end":return e.stop()}},e)})),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getUserLocation()}},{key:"render",value:function(){var e=this.props,t=e.userLocation,a=e.weather,n=e.error,c=e.isLoading,i=e.timezone,s=t.city;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App--header"},r.a.createElement("h1",{className:"h1"},"Weekly Weather")),r.a.createElement(_,null),!c&&r.a.createElement("div",null,a.today&&!n&&r.a.createElement(R,{city:s,weather:a,timezone:i}),n&&r.a.createElement("h2",{className:"App--h2"},"No results found")),c&&r.a.createElement("h2",{className:"App--h2"},"Loading..."),r.a.createElement("div",{className:"App--div--darksky"},r.a.createElement("a",{href:"https://darksky.net/poweredby/"},"Powered by Dark Sky")))}}]),t}(n.Component),z=Object(g.a)(Object(h.b)(function(e){return{userLocation:e.location,weather:e.weather,error:e.error,isLoading:e.isLoading,timezone:e.timezone}},function(e){return{getUserIP:function(t){return e(function(e){return function(){var t=Object(u.a)(o.a.mark(function t(a){var n,r,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a(O(!0)),t.prev=1,t.next=5,E("https://weekly-weather.herokuapp.com/api/v1/ip");case 5:return n=t.sent,r=n.latitude,c=n.longitude,a(y({latitude:r,longitude:c})),t.next=11,a(I({latitude:r,longitude:c},e));case 11:return t.next=13,a(j({latitude:r,longitude:c}));case 13:a(b("")),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),a(b(t.t0.message));case 19:a(O(!1));case 20:case"end":return t.stop()}},t,null,[[1,16]])}));return function(e){return t.apply(this,arguments)}}()}(t))},getGeolocation:function(t,a){var n=t.latitude,r=t.longitude;e(function(e,t){var a=e.latitude,n=e.longitude;return function(){var e=Object(u.a)(o.a.mark(function e(r){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r(O(!0)),e.prev=1,r(y({latitude:a,longitude:n})),e.next=5,r(I({latitude:a,longitude:n},t));case 5:return e.next=7,r(j({latitude:a,longitude:n}));case 7:r(b("")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r(b(e.t0.message));case 13:r(O(!1));case 14:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}()}({latitude:n,longitude:r},a))},toggleLoading:function(t){return e(O(t))}}})(W)),G=a(320),A=a(20),P=a(151),U=a(152),H={latitude:null,longitude:null,city:""},B={userOffset:null,cityOffset:null},F=Object(A.combineReducers)({location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COORDINATES":var a=t.latitude,n=t.longitude;return Object(N.a)({},e,{latitude:a,longitude:n});case"SET_CITY":var r=t.city;return Object(N.a)({},e,{city:r});default:return e}},weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WEATHER":return t.weather;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR":return t.message;default:return e}},isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_LOADING":return t.isLoading;default:return e}},timezone:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_TIMEZONE":return Object(N.a)({},e,{userOffset:t.offset,cityOffset:t.offset});case"SET_CITY_TIMEZONE":return Object(N.a)({},e,{cityOffset:t.offset});default:return e}}}),q=Object(P.composeWithDevTools)(Object(A.applyMiddleware)(U.a)),Y=Object(A.createStore)(F,q),Z=r.a.createElement(h.a,{store:Y},r.a.createElement(G.a,null,r.a.createElement(z,null)));i.a.render(Z,document.getElementById("root"))}},[[153,1,2]]]);
//# sourceMappingURL=main.dcc820c3.chunk.js.map